<html>
<head>
<title>TestBinarySearchAutocomplete.java</title>
</head>
<body>
Link to code: <a href="../src/TestBinarySearchAutocomplete.java">TestBinarySearchAutocomplete.java</a><br>
<hr>
<!-- Generator: GNU source-highlight 3.1.1
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><font color="#3f5fbf">import</font><font color="#000000"> </font><b><font color="#7f0055">static</font></b><font color="#000000"> org</font><font color="#000000">.</font><font color="#000000">junit</font><font color="#000000">.</font><font color="#000000">Assert</font><font color="#000000">.*;</font>

<font color="#3f5fbf">import</font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">util</font><font color="#000000">.</font><font color="#000000">Comparator</font><font color="#000000">;</font>

<font color="#3f5fbf">import</font><font color="#000000"> org</font><font color="#000000">.</font><font color="#000000">junit</font><font color="#000000">.</font><font color="#000000">Test</font><font color="#000000">;</font>

<b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">class</font></b><font color="#000000"> </font><font color="#000000">TestBinarySearchAutocomplete</font><font color="#000000"> </font><font color="#000000">{</font>

<font color="#000000">	</font><b><font color="#7f0055">private</font></b><font color="#000000"> Term</font><font color="#000000">[]</font><font color="#000000"> myTerms </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">[]</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"apple"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font>
<font color="#000000">			</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"cat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">	</font><b><font color="#7f0055">private</font></b><font color="#000000"> String</font><font color="#000000">[]</font><font color="#000000"> myNames </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"app"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ban"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"cat"</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">	</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><b><font color="#7f0055">double</font></b><font color="#000000">[]</font><font color="#000000"> myWeights </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#000000">6</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">4</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">2</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">3</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">5</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">7</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">;</font>

<font color="#000000">	</font><font color="#717ab3">/** A comparator which considers all terms equal **/</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">class</font></b><font color="#000000"> </font><font color="#000000">AllEqual</font><font color="#000000"> </font><b><font color="#7f0055">implements</font></b><font color="#000000"> Comparator</font><font color="#000000">&lt;</font><font color="#000000">Term</font><font color="#000000">&gt;</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">int</font></b><font color="#000000"> </font><font color="#000000">compare</font><font color="#000000">(</font><font color="#000000">Term</font><font color="#000000"> o1</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000"> o2</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><b><font color="#7f0055">return</font></b><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">;</font>
<font color="#000000">		</font><font color="#000000">}</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#717ab3">/**</font>
<font color="#717ab3">	 * A comparator which is basically Term.PrefixOrder, but counts the number</font>
<font color="#717ab3">	 * of compare calls made</font>
<font color="#717ab3">	 */</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">class</font></b><font color="#000000"> </font><font color="#000000">CompareCounter</font><font color="#000000"> </font><b><font color="#7f0055">implements</font></b><font color="#000000"> Comparator</font><font color="#000000">&lt;</font><font color="#000000">Term</font><font color="#000000">&gt;</font><font color="#000000"> </font><font color="#000000">{</font>

<font color="#000000">		</font><b><font color="#7f0055">private</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000"> comparator</font><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><b><font color="#7f0055">int</font></b><font color="#000000"> count </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">;</font>

<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><font color="#000000">CompareCounter</font><font color="#000000">(</font><b><font color="#7f0055">int</font></b><font color="#000000"> r</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			comparator </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">r</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">}</font>

<font color="#000000">		@Override</font>
<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">int</font></b><font color="#000000"> </font><font color="#000000">compare</font><font color="#000000">(</font><font color="#000000">Term</font><font color="#000000"> o1</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000"> o2</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			count</font><font color="#000000">++;</font>
<font color="#000000">			</font><b><font color="#7f0055">return</font></b><font color="#000000"> comparator</font><font color="#000000">.</font><font color="#000000">compare</font><font color="#000000">(</font><font color="#000000">o1</font><font color="#000000">,</font><font color="#000000"> o2</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">}</font>

<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">int</font></b><font color="#000000"> </font><font color="#000000">compareCount</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><b><font color="#7f0055">return</font></b><font color="#000000"> count</font><font color="#000000">;</font>
<font color="#000000">		</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#717ab3">/**</font>
<font color="#717ab3">	 * Sorts terms by ascending weight</font>
<font color="#717ab3">	 */</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">class</font></b><font color="#000000"> </font><font color="#000000">WeightSorter</font><font color="#000000"> </font><b><font color="#7f0055">implements</font></b><font color="#000000"> Comparator</font><font color="#000000">&lt;</font><font color="#000000">Term</font><font color="#000000">&gt;</font><font color="#000000"> </font><font color="#000000">{</font>

<font color="#000000">		@Override</font>
<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">int</font></b><font color="#000000"> </font><font color="#000000">compare</font><font color="#000000">(</font><font color="#000000">Term</font><font color="#000000"> o1</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000"> o2</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><b><font color="#7f0055">return</font></b><font color="#000000"> </font><font color="#000000">(</font><b><font color="#7f0055">int</font></b><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">100</font><font color="#000000"> </font><font color="#000000">*</font><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">o1</font><font color="#000000">.</font><font color="#000000">getWeight</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">-</font><font color="#000000"> o2</font><font color="#000000">.</font><font color="#000000">getWeight</font><font color="#000000">()));</font>
<font color="#000000">		</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><font color="#000000">Autocompletor</font><font color="#000000"> </font><font color="#000000">getInstance</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><b><font color="#7f0055">return</font></b><font color="#000000"> </font><font color="#000000">getInstance</font><font color="#000000">(</font><font color="#000000">myNames</font><font color="#000000">,</font><font color="#000000"> myWeights</font><font color="#000000">);</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><font color="#000000">Autocompletor</font><font color="#000000"> </font><font color="#000000">getInstance</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000">[]</font><font color="#000000"> names</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">double</font></b><font color="#000000">[]</font><font color="#000000"> weights</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><b><font color="#7f0055">return</font></b><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">BinarySearchAutocomplete</font><font color="#000000">(</font><font color="#000000">names</font><font color="#000000">,</font><font color="#000000"> weights</font><font color="#000000">);</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">class</font></b><font color="#000000"> </font><font color="#000000">Autoincompletor</font><font color="#000000"> </font><b><font color="#7f0055">extends</font></b><font color="#000000"> BinarySearchAutocomplete </font><font color="#000000">{</font>

<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><font color="#000000">Autoincompletor</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000">[]</font><font color="#000000"> terms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">double</font></b><font color="#000000">[]</font><font color="#000000"> weights</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><b><font color="#7f0055">super</font></b><font color="#000000">(</font><font color="#000000">terms</font><font color="#000000">,</font><font color="#000000"> weights</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">}</font>

<font color="#000000">		@Override</font>
<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> String</font><font color="#000000">[]</font><font color="#000000"> </font><font color="#000000">topKMatches</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000"> prefix</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">int</font></b><font color="#000000"> k</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><b><font color="#7f0055">return</font></b><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> String</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">];</font>
<font color="#000000">		</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#717ab3">/**</font>
<font color="#717ab3">	 * Tests correctness of topMatch() for a few simple cases</font>
<font color="#717ab3">	 */</font>
<font color="#000000">	@</font><font color="#000000">Test</font><font color="#000000">(</font><font color="#000000">timeout </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">10000</font><font color="#000000">)</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">testTopMatch</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><font color="#000000">Autocompletor</font><font color="#000000"> test </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">getInstance</font><font color="#000000">();</font>
<font color="#000000">		String</font><font color="#000000">[]</font><font color="#000000"> queries </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"a"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ap"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"b"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ba"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"c"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ca"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"cat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"d"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">" "</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		String</font><font color="#000000">[]</font><font color="#000000"> results </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"cat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">for</font></b><font color="#000000"> </font><font color="#000000">(</font><b><font color="#7f0055">int</font></b><font color="#000000"> i </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">;</font><font color="#000000"> i </font><font color="#000000">&lt;</font><font color="#000000"> queries</font><font color="#000000">.</font><font color="#000000">length</font><font color="#000000">;</font><font color="#000000"> i</font><font color="#000000">++)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#000000">String</font><font color="#000000"> query </font><font color="#000000">=</font><font color="#000000"> queries</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">];</font>
<font color="#000000">			</font><font color="#000000">String</font><font color="#000000"> reported </font><font color="#000000">=</font><font color="#000000"> test</font><font color="#000000">.</font><font color="#000000">topMatch</font><font color="#000000">(</font><font color="#000000">query</font><font color="#000000">);</font>
<font color="#000000">			</font><font color="#000000">String</font><font color="#000000"> actual </font><font color="#000000">=</font><font color="#000000"> results</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">];</font>
<font color="#000000">			</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#0000ff">"wrong top match for "</font><font color="#000000"> </font><font color="#000000">+</font><font color="#000000"> query</font><font color="#000000">,</font><font color="#000000"> actual</font><font color="#000000">,</font><font color="#000000"> reported</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">}</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#717ab3">/**</font>
<font color="#717ab3">	 * Tests correctness of topKMatches() for a few simple cases</font>
<font color="#717ab3">	 */</font>
<font color="#000000">	@</font><font color="#000000">Test</font><font color="#000000">(</font><font color="#000000">timeout </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">10000</font><font color="#000000">)</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">testTopKMatches</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><font color="#000000">Autocompletor</font><font color="#000000"> test </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">getInstance</font><font color="#000000">();</font>
<font color="#000000">		String</font><font color="#000000">[]</font><font color="#000000"> queries </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"a"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ap"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"b"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ba"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"d"</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">int</font></b><font color="#000000">[]</font><font color="#000000"> ks </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#000000">8</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">2</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">3</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">2</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">2</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">100</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		String</font><font color="#000000">[][]</font><font color="#000000"> results </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"app"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ban"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"cat"</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#0000ff">"car"</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">,</font>
<font color="#000000">				</font><font color="#000000">{</font><font color="#000000"> </font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bee"</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bat"</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ban"</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">{}</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">for</font></b><font color="#000000"> </font><font color="#000000">(</font><b><font color="#7f0055">int</font></b><font color="#000000"> i </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">;</font><font color="#000000"> i </font><font color="#000000">&lt;</font><font color="#000000"> queries</font><font color="#000000">.</font><font color="#000000">length</font><font color="#000000">;</font><font color="#000000"> i</font><font color="#000000">++)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#000000">String</font><font color="#000000"> query </font><font color="#000000">=</font><font color="#000000"> queries</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">];</font>
<font color="#000000">			String</font><font color="#000000">[]</font><font color="#000000"> reported </font><font color="#000000">=</font><font color="#000000"> test</font><font color="#000000">.</font><font color="#000000">topKMatches</font><font color="#000000">(</font><font color="#000000">query</font><font color="#000000">,</font><font color="#000000"> ks</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]);</font>
<font color="#000000">			String</font><font color="#000000">[]</font><font color="#000000"> actual </font><font color="#000000">=</font><font color="#000000"> results</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">];</font>
<font color="#000000">			</font><font color="#000000">assertArrayEquals</font><font color="#000000">(</font><font color="#0000ff">"wrong top matches for "</font><font color="#000000"> </font><font color="#000000">+</font><font color="#000000"> query </font><font color="#000000">+</font><font color="#000000"> </font><font color="#0000ff">" "</font><font color="#000000"> </font><font color="#000000">+</font><font color="#000000"> ks</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">],</font><font color="#000000"> actual</font><font color="#000000">,</font><font color="#000000"> reported</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">}</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#717ab3">/**</font>
<font color="#717ab3">	 * Tests correctness of simple cases where firstIndexOf should find an index</font>
<font color="#717ab3">	 */</font>
<font color="#000000">	@</font><font color="#000000">Test</font><font color="#000000">(</font><font color="#000000">timeout </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">10000</font><font color="#000000">)</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">testFirstIndexOfHits</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">firstIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"a"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">)));</font>

<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">firstIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"a"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">)));</font>

<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">2</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">firstIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ba"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">2</font><font color="#000000">)));</font>

<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">4</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">firstIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"cat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">3</font><font color="#000000">)));</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	@</font><font color="#000000">Test</font><font color="#000000">(</font><font color="#000000">timeout </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">10000</font><font color="#000000">)</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">testLastIndexOfHits</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"a"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">)));</font>

<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ap"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">2</font><font color="#000000">)));</font>

<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">3</font><font color="#000000">)));</font>

<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">3</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"b"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">)));</font>

<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">4</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"c"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">)));</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#717ab3">/**</font>
<font color="#717ab3">	 * Tests correctness of simple cases where firstIndexOf and lastIndexOf</font>
<font color="#717ab3">	 * should not find a valid index (and thus return -1)</font>
<font color="#717ab3">	 */</font>
<font color="#000000">	@</font><font color="#000000">Test</font><font color="#000000">(</font><font color="#000000">timeout </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">10000</font><font color="#000000">)</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">testFirstIndexOfMisses</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(-</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">firstIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"d"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(-</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">firstIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ab"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">2</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(-</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">firstIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">3</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(-</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">firstIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"cat "</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">4</font><font color="#000000">)));</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#717ab3">/**</font>
<font color="#717ab3">	 * This test checks if lastIndexOf returns -1 for missing words"</font>
<font color="#717ab3">	 */</font>
<font color="#000000">	@</font><font color="#000000">Test</font><font color="#000000">(</font><font color="#000000">timeout </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">10000</font><font color="#000000">)</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">testLastIndexOfMisses</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(-</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"d"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(-</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ab"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">2</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(-</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">3</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(-</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">myTerms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"cat "</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">4</font><font color="#000000">)));</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#717ab3">/**</font>
<font color="#717ab3">	 * Tests if firstIndexOf/lastIndexOf return the correct first/last index</font>
<font color="#717ab3">	 * when duplicates exist.</font>
<font color="#717ab3">	 */</font>
<font color="#000000">	@</font><font color="#000000">Test</font><font color="#000000">(</font><font color="#000000">timeout </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">10000</font><font color="#000000">)</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">testFirstIndexOfDuplicates</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		Term</font><font color="#000000">[]</font><font color="#000000"> terms </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">[]</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"apple"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"apple"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"apple"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"cat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">firstIndexOf</font><font color="#000000">(</font><font color="#000000">terms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"a"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">firstIndexOf</font><font color="#000000">(</font><font color="#000000">terms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"app"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">3</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">4</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">firstIndexOf</font><font color="#000000">(</font><font color="#000000">terms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"b"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">7</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">firstIndexOf</font><font color="#000000">(</font><font color="#000000">terms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"be"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">2</font><font color="#000000">)));</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	@</font><font color="#000000">Test</font><font color="#000000">(</font><font color="#000000">timeout </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">10000</font><font color="#000000">)</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">testLastIndexOfDuplicates</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		Term</font><font color="#000000">[]</font><font color="#000000"> terms </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">[]</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"apple"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"apple"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"apple"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"cat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">3</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">terms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"a"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">3</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">terms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"app"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">3</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">6</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">terms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ba"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">2</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#000000">9</font><font color="#000000">,</font><font color="#000000"> BinarySearchAutocomplete</font><font color="#000000">.</font><font color="#000000">lastIndexOf</font><font color="#000000">(</font><font color="#000000">terms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"b"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">),</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">.</font><font color="#000000">PrefixOrder</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">)));</font>
<font color="#000000">	</font><font color="#000000">}</font>
<font color="#000000">}</font>
</tt></pre>
</body>
</html>

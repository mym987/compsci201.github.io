<html>
<head>
<title>AutocompleteGUI.java</title>
</head>
<body>
Link to code: <a href="../src/AutocompleteGUI.java">AutocompleteGUI.java</a><br>
<hr>
<!-- Generator: GNU source-highlight 3.1.1
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><font color="#717ab3">/*************************************************************************</font>
<font color="#717ab3"> * </font><b><font color="#7f0055">@author</font></b><font color="#717ab3"> Matthew Drabick, adapted by Austin Lu for COMPSCI 201 Autocomplete,</font>
<font color="#717ab3"> * </font>
<font color="#717ab3"> *         Interactive GUI used to demonstrate the Autocomplete data type.</font>
<font color="#717ab3"> *</font>
<font color="#717ab3"> *         * Reads a list of terms and weights from a file, specified as a command-line argument.</font>
<font color="#717ab3"> *</font>
<font color="#717ab3"> *         * As the user types in a text box, display the top-k terms that start with the text that</font>
<font color="#717ab3"> *         the user types.</font>
<font color="#717ab3"> *</font>
<font color="#717ab3"> *         * Displays the result in a browser if the user selects a term (by pressing enter or</font>
<font color="#717ab3"> *         clicking a selection).</font>
<font color="#717ab3"> *</font>
<font color="#717ab3"> *         </font><font color="#000000">BUG:</font><font color="#717ab3"> Selections don't autoupdate if user enter character into text box without typing it</font>
<font color="#717ab3"> *         (e.g., by selecting it from Mac OS X Character Viewer). </font><font color="#000000">BUG:</font><font color="#717ab3"> Completion list disappears</font>
<font color="#717ab3"> *         when user clicks to browse.</font>
<font color="#717ab3"> *         </font>
<font color="#717ab3"> *         * (06/01/2015) - GUI is no longer case-sensitive, but results are</font>
<font color="#717ab3"> *         still displayed in their original case.</font>
<font color="#717ab3"> *     </font>
<font color="#717ab3"> *</font>
<font color="#717ab3"> *************************************************************************/</font>

<font color="#3f5fbf">import</font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">awt</font><font color="#000000">.*;</font>
<font color="#3f5fbf">import</font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">awt</font><font color="#000000">.</font><font color="#000000">event</font><font color="#000000">.*;</font>
<font color="#3f5fbf">import</font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">io</font><font color="#000000">.</font><font color="#000000">File</font><font color="#000000">;</font>
<font color="#3f5fbf">import</font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">io</font><font color="#000000">.</font><font color="#000000">FileNotFoundException</font><font color="#000000">;</font>
<font color="#3f5fbf">import</font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">io</font><font color="#000000">.</font><font color="#000000">IOException</font><font color="#000000">;</font>
<font color="#3f5fbf">import</font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">lang</font><font color="#000000">.</font><font color="#000000">reflect</font><font color="#000000">.</font><font color="#000000">InvocationTargetException</font><font color="#000000">;</font>
<font color="#3f5fbf">import</font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">net</font><font color="#000000">.</font><font color="#000000">URI</font><font color="#000000">;</font>
<font color="#3f5fbf">import</font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">net</font><font color="#000000">.</font><font color="#000000">URISyntaxException</font><font color="#000000">;</font>

<font color="#3f5fbf">import</font><font color="#000000"> javax</font><font color="#000000">.</font><font color="#000000">swing</font><font color="#000000">.*;</font>

<font color="#3f5fbf">import</font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">util</font><font color="#000000">.*;</font>

<font color="#000000">@</font><font color="#000000">SuppressWarnings</font><font color="#000000">(</font><font color="#0000ff">"serial"</font><font color="#000000">)</font>
<b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">class</font></b><font color="#000000"> </font><font color="#000000">AutocompleteGUI</font><font color="#000000"> </font><b><font color="#7f0055">extends</font></b><font color="#000000"> JFrame </font><font color="#000000">{</font>
<font color="#000000">	</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><b><font color="#7f0055">static</font></b><font color="#000000"> </font><b><font color="#7f0055">int</font></b><font color="#000000"> DEF_WIDTH </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">600</font><font color="#000000">;</font>
<font color="#000000">	</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><b><font color="#7f0055">static</font></b><font color="#000000"> </font><b><font color="#7f0055">int</font></b><font color="#000000"> DEF_HEIGHT </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">400</font><font color="#000000">;</font>
<font color="#000000">	</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><b><font color="#7f0055">static</font></b><font color="#000000"> </font><font color="#000000">String</font><font color="#000000"> searchURL </font><font color="#000000">=</font><font color="#000000"> </font><font color="#0000ff">"https://www.google.com/search?q="</font><font color="#000000">;</font>
<font color="#000000">	</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><font color="#000000">HashMap&lt;String, String&gt;</font><font color="#000000"> casingMap</font><font color="#000000">;</font>

<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">static</font></b><font color="#000000"> </font><b><font color="#7f0055">final</font></b><font color="#000000"> </font><font color="#000000">String</font><font color="#000000"> CHARSET </font><font color="#000000">=</font><font color="#000000"> </font><font color="#0000ff">"UTF-8"</font><font color="#000000">;</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">static</font></b><font color="#000000"> </font><b><font color="#7f0055">final</font></b><font color="#000000"> </font><font color="#000000">Locale</font><font color="#000000"> LOCALE </font><font color="#000000">=</font><font color="#000000"> Locale</font><font color="#000000">.</font><font color="#000000">US</font><font color="#000000">;</font>

<font color="#000000">	</font><font color="#717ab3">// display top k results</font>
<font color="#000000">	</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><b><font color="#7f0055">final</font></b><font color="#000000"> </font><b><font color="#7f0055">int</font></b><font color="#000000"> k</font><font color="#000000">;</font>
<font color="#000000">	</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><b><font color="#7f0055">final</font></b><font color="#000000"> </font><font color="#000000">String</font><font color="#000000"> autocompletorClassName</font><font color="#000000">;</font>

<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><font color="#000000">AutocompleteGUI</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000"> fileName</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">int</font></b><font color="#000000"> k</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">String</font><font color="#000000"> className</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><b><font color="#7f0055">this</font></b><font color="#000000">.</font><font color="#000000">k </font><font color="#000000">=</font><font color="#000000"> k</font><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">this</font></b><font color="#000000">.</font><font color="#000000">autocompletorClassName </font><font color="#000000">=</font><font color="#000000"> className</font><font color="#000000">;</font>
<font color="#000000">		</font><font color="#000000">setDefaultCloseOperation</font><font color="#000000">(</font><font color="#000000">JFrame</font><font color="#000000">.</font><font color="#000000">EXIT_ON_CLOSE</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">setTitle</font><font color="#000000">(</font><font color="#0000ff">"Autocomplete"</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">setLocationRelativeTo</font><font color="#000000">(</font><b><font color="#7f0055">null</font></b><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">Container</font><font color="#000000"> content </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">getContentPane</font><font color="#000000">();</font>
<font color="#000000">		</font><font color="#000000">GroupLayout</font><font color="#000000"> layout </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">GroupLayout</font><font color="#000000">(</font><font color="#000000">content</font><font color="#000000">);</font>
<font color="#000000">		content</font><font color="#000000">.</font><font color="#000000">setLayout</font><font color="#000000">(</font><font color="#000000">layout</font><font color="#000000">);</font>
<font color="#000000">		layout</font><font color="#000000">.</font><font color="#000000">setAutoCreateGaps</font><font color="#000000">(</font><b><font color="#7f0055">true</font></b><font color="#000000">);</font>
<font color="#000000">		layout</font><font color="#000000">.</font><font color="#000000">setAutoCreateContainerGaps</font><font color="#000000">(</font><b><font color="#7f0055">true</font></b><font color="#000000">);</font>
<font color="#000000">		</font><b><font color="#7f0055">final</font></b><font color="#000000"> </font><font color="#000000">AutocompletePanel</font><font color="#000000"> ap </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">AutocompletePanel</font><font color="#000000">(</font><font color="#000000">fileName</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">JButton</font><font color="#000000"> searchButton </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">JButton</font><font color="#000000">(</font><font color="#0000ff">"Search Google"</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#717ab3">// searchButton.setBorder(BorderFactory.createEmptyBorder(2, 0, 0, 0));</font>
<font color="#000000">		searchButton</font><font color="#000000">.</font><font color="#000000">addMouseListener</font><font color="#000000">(</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">MouseListener</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#717ab3">// Need a bunch of unimplemented reports</font>
<font color="#000000">			</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">mousePressed</font><font color="#000000">(</font><font color="#000000">MouseEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#000000">}</font>

<font color="#000000">			</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">mouseReleased</font><font color="#000000">(</font><font color="#000000">MouseEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#000000">}</font>

<font color="#000000">			</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">mouseEntered</font><font color="#000000">(</font><font color="#000000">MouseEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#000000">}</font>

<font color="#000000">			</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">mouseExited</font><font color="#000000">(</font><font color="#000000">MouseEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#000000">}</font>

<font color="#000000">			@Override</font>
<font color="#000000">			</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">mouseClicked</font><font color="#000000">(</font><font color="#000000">MouseEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				</font><font color="#000000">searchOnline</font><font color="#000000">(</font><font color="#000000">ap</font><font color="#000000">.</font><font color="#000000">getSelectedText</font><font color="#000000">());</font>
<font color="#000000">			</font><font color="#000000">}</font>
<font color="#000000">		</font><font color="#000000">}</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">JLabel</font><font color="#000000"> textLabel </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">JLabel</font><font color="#000000">(</font><font color="#0000ff">"Type text:"</font><font color="#000000">);</font>
<font color="#000000">		textLabel</font><font color="#000000">.</font><font color="#000000">setBorder</font><font color="#000000">(</font><font color="#000000">BorderFactory</font><font color="#000000">.</font><font color="#000000">createEmptyBorder</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">4</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">));</font>
<font color="#000000">		layout</font><font color="#000000">.</font><font color="#000000">setHorizontalGroup</font><font color="#000000">(</font><font color="#000000">layout</font><font color="#000000">.</font><font color="#000000">createSequentialGroup</font><font color="#000000">()</font>
<font color="#000000">				</font><font color="#000000">.</font><font color="#000000">addPreferredGap</font><font color="#000000">(</font><font color="#000000">LayoutStyle</font><font color="#000000">.</font><font color="#000000">ComponentPlacement</font><font color="#000000">.</font><font color="#000000">RELATED</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">DEFAULT_SIZE</font><font color="#000000">,</font><font color="#000000"> Short</font><font color="#000000">.</font><font color="#000000">MAX_VALUE</font><font color="#000000">)</font>
<font color="#000000">				</font><font color="#000000">.</font><font color="#000000">addComponent</font><font color="#000000">(</font><font color="#000000">textLabel</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">PREFERRED_SIZE</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">DEFAULT_SIZE</font><font color="#000000">,</font>
<font color="#000000">						GroupLayout</font><font color="#000000">.</font><font color="#000000">PREFERRED_SIZE</font><font color="#000000">)</font>
<font color="#000000">				</font><font color="#000000">.</font><font color="#000000">addPreferredGap</font><font color="#000000">(</font><font color="#000000">LayoutStyle</font><font color="#000000">.</font><font color="#000000">ComponentPlacement</font><font color="#000000">.</font><font color="#000000">RELATED</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">DEFAULT_SIZE</font><font color="#000000">,</font>
<font color="#000000">						GroupLayout</font><font color="#000000">.</font><font color="#000000">DEFAULT_SIZE</font><font color="#000000">)</font>
<font color="#000000">				</font><font color="#000000">.</font><font color="#000000">addComponent</font><font color="#000000">(</font><font color="#000000">ap</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">DEFAULT_SIZE</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">PREFERRED_SIZE</font><font color="#000000">)</font>
<font color="#000000">				</font><font color="#000000">.</font><font color="#000000">addPreferredGap</font><font color="#000000">(</font><font color="#000000">LayoutStyle</font><font color="#000000">.</font><font color="#000000">ComponentPlacement</font><font color="#000000">.</font><font color="#000000">RELATED</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">DEFAULT_SIZE</font><font color="#000000">,</font>
<font color="#000000">						GroupLayout</font><font color="#000000">.</font><font color="#000000">DEFAULT_SIZE</font><font color="#000000">)</font>
<font color="#000000">				</font><font color="#000000">.</font><font color="#000000">addComponent</font><font color="#000000">(</font><font color="#000000">searchButton</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">PREFERRED_SIZE</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">DEFAULT_SIZE</font><font color="#000000">,</font>
<font color="#000000">						GroupLayout</font><font color="#000000">.</font><font color="#000000">PREFERRED_SIZE</font><font color="#000000">)</font>
<font color="#000000">				</font><font color="#000000">.</font><font color="#000000">addPreferredGap</font><font color="#000000">(</font><font color="#000000">LayoutStyle</font><font color="#000000">.</font><font color="#000000">ComponentPlacement</font><font color="#000000">.</font><font color="#000000">RELATED</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">DEFAULT_SIZE</font><font color="#000000">,</font><font color="#000000"> Short</font><font color="#000000">.</font><font color="#000000">MAX_VALUE</font><font color="#000000">));</font>
<font color="#000000">		layout</font><font color="#000000">.</font><font color="#000000">setVerticalGroup</font><font color="#000000">(</font>
<font color="#000000">				layout</font><font color="#000000">.</font><font color="#000000">createSequentialGroup</font><font color="#000000">().</font><font color="#000000">addGroup</font><font color="#000000">(</font><font color="#000000">layout</font><font color="#000000">.</font><font color="#000000">createParallelGroup</font><font color="#000000">(</font><font color="#000000">GroupLayout</font><font color="#000000">.</font><font color="#000000">Alignment</font><font color="#000000">.</font><font color="#000000">BASELINE</font><font color="#000000">)</font>
<font color="#000000">						</font><font color="#000000">.</font><font color="#000000">addComponent</font><font color="#000000">(</font><font color="#000000">textLabel</font><font color="#000000">).</font><font color="#000000">addComponent</font><font color="#000000">(</font><font color="#000000">ap</font><font color="#000000">).</font><font color="#000000">addComponent</font><font color="#000000">(</font><font color="#000000">searchButton</font><font color="#000000">)));</font>
<font color="#000000">		</font><font color="#000000">setPreferredSize</font><font color="#000000">(</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Dimension</font><font color="#000000">(</font><font color="#000000">DEF_WIDTH</font><font color="#000000">,</font><font color="#000000"> DEF_HEIGHT</font><font color="#000000">));</font>
<font color="#000000">		</font><font color="#000000">pack</font><font color="#000000">();</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><b><font color="#7f0055">class</font></b><font color="#000000"> </font><font color="#000000">AutocompletePanel</font><font color="#000000"> </font><b><font color="#7f0055">extends</font></b><font color="#000000"> JPanel </font><font color="#000000">{</font>
<font color="#000000">		</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><b><font color="#7f0055">final</font></b><font color="#000000"> </font><font color="#000000">JTextField</font><font color="#000000"> searchText</font><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><font color="#000000">Autocompletor</font><font color="#000000"> auto</font><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">private</font></b><font color="#000000"> String</font><font color="#000000">[]</font><font color="#000000"> results </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> String</font><font color="#000000">[</font><font color="#000000">k</font><font color="#000000">];</font>
<font color="#000000">		</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><font color="#000000">JList&lt;String&gt;</font><font color="#000000"> suggestions</font><font color="#000000">;</font>

<font color="#000000">		</font><font color="#717ab3">// keep these two values in sync! - used to keep the listbox the same</font>
<font color="#000000">		</font><font color="#717ab3">// width as the textfield</font>
<font color="#000000">		</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><b><font color="#7f0055">final</font></b><font color="#000000"> </font><b><font color="#7f0055">int</font></b><font color="#000000"> DEF_COLUMNS </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">30</font><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><b><font color="#7f0055">final</font></b><font color="#000000"> </font><font color="#000000">String</font><font color="#000000"> suggListLen </font><font color="#000000">=</font><font color="#000000"> </font><font color="#0000ff">"&lt;b&gt;Harry Potter and the Deathly Hallows: Part 1 (2010)&lt;/b&gt;"</font><font color="#000000">;</font>

<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><font color="#000000">AutocompletePanel</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000"> filename</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><b><font color="#7f0055">super</font></b><font color="#000000">();</font>

<font color="#000000">			</font><font color="#717ab3">// read in the data</font>
<font color="#000000">			</font><font color="#000000">Scanner</font><font color="#000000"> in</font><font color="#000000">;</font>
<font color="#000000">			</font><b><font color="#7f0055">try</font></b><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				in </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Scanner</font><font color="#000000">(</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">File</font><font color="#000000">(</font><font color="#000000">filename</font><font color="#000000">),</font><font color="#000000"> CHARSET</font><font color="#000000">);</font>
<font color="#000000">				in</font><font color="#000000">.</font><font color="#000000">useLocale</font><font color="#000000">(</font><font color="#000000">LOCALE</font><font color="#000000">);</font>
<font color="#000000">				</font><b><font color="#7f0055">int</font></b><font color="#000000"> N </font><font color="#000000">=</font><font color="#000000"> Integer</font><font color="#000000">.</font><font color="#000000">parseInt</font><font color="#000000">(</font><font color="#000000">in</font><font color="#000000">.</font><font color="#000000">nextLine</font><font color="#000000">());</font>
<font color="#000000">				String</font><font color="#000000">[]</font><font color="#000000"> terms </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> String</font><font color="#000000">[</font><font color="#000000">N</font><font color="#000000">];</font>
<font color="#000000">				</font><b><font color="#7f0055">double</font></b><font color="#000000">[]</font><font color="#000000"> weights </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><b><font color="#7f0055">double</font></b><font color="#000000">[</font><font color="#000000">N</font><font color="#000000">];</font>
<font color="#000000">				casingMap </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> HashMap</font><font color="#000000">&lt;</font><font color="#000000">String</font><font color="#000000">,</font><font color="#000000"> String</font><font color="#000000">&gt;();</font>
<font color="#000000">				</font><b><font color="#7f0055">for</font></b><font color="#000000"> </font><font color="#000000">(</font><b><font color="#7f0055">int</font></b><font color="#000000"> i </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">;</font><font color="#000000"> i </font><font color="#000000">&lt;</font><font color="#000000"> N</font><font color="#000000">;</font><font color="#000000"> i</font><font color="#000000">++)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">					</font><font color="#000000">String</font><font color="#000000"> line </font><font color="#000000">=</font><font color="#000000"> in</font><font color="#000000">.</font><font color="#000000">nextLine</font><font color="#000000">();</font>
<font color="#000000">					</font><b><font color="#7f0055">int</font></b><font color="#000000"> tab </font><font color="#000000">=</font><font color="#000000"> line</font><font color="#000000">.</font><font color="#000000">indexOf</font><font color="#000000">(</font><font color="#0000ff">'</font><font color="#0000ff">\t</font><font color="#0000ff">'</font><font color="#000000">);</font>
<font color="#000000">					weights</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000"> </font><font color="#000000">=</font><font color="#000000"> Double</font><font color="#000000">.</font><font color="#000000">parseDouble</font><font color="#000000">(</font><font color="#000000">line</font><font color="#000000">.</font><font color="#000000">substring</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> tab</font><font color="#000000">).</font><font color="#000000">trim</font><font color="#000000">());</font>
<font color="#000000">					casingMap</font><font color="#000000">.</font><font color="#000000">put</font><font color="#000000">(</font><font color="#000000">line</font><font color="#000000">.</font><font color="#000000">substring</font><font color="#000000">(</font><font color="#000000">tab </font><font color="#000000">+</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">).</font><font color="#000000">toLowerCase</font><font color="#000000">(),</font><font color="#000000"> line</font><font color="#000000">.</font><font color="#000000">substring</font><font color="#000000">(</font><font color="#000000">tab </font><font color="#000000">+</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">));</font>
<font color="#000000">					terms</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000"> </font><font color="#000000">=</font><font color="#000000"> line</font><font color="#000000">.</font><font color="#000000">substring</font><font color="#000000">(</font><font color="#000000">tab </font><font color="#000000">+</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">).</font><font color="#000000">toLowerCase</font><font color="#000000">();</font>
<font color="#000000">					</font><font color="#717ab3">// create the autocomplete object</font>
<font color="#000000">				</font><font color="#000000">}</font>
<font color="#000000">				auto </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">Autocompletor</font><font color="#000000">)</font><font color="#000000"> Class</font><font color="#000000">.</font><font color="#000000">forName</font><font color="#000000">(</font><font color="#000000">autocompletorClassName</font><font color="#000000">)</font>
<font color="#000000">						</font><font color="#000000">.</font><font color="#000000">getDeclaredConstructor</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000">[].</font><b><font color="#7f0055">class</font></b><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">double</font></b><font color="#000000">[].</font><b><font color="#7f0055">class</font></b><font color="#000000">).</font><font color="#000000">newInstance</font><font color="#000000">(</font><font color="#000000">terms</font><font color="#000000">,</font><font color="#000000"> weights</font><font color="#000000">);</font>

<font color="#000000">			</font><font color="#000000">}</font><font color="#000000"> </font><b><font color="#7f0055">catch</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">InstantiationException </font><font color="#000000">|</font><font color="#000000"> IllegalAccessException </font><font color="#000000">|</font><font color="#000000"> ClassNotFoundException </font><font color="#000000">|</font><font color="#000000"> IllegalArgumentException</font>
<font color="#000000">					</font><font color="#000000">|</font><font color="#000000"> InvocationTargetException </font><font color="#000000">|</font><font color="#000000"> NoSuchMethodException </font><font color="#000000">|</font><font color="#000000"> </font><font color="#000000">SecurityException</font><font color="#000000"> e1</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				e1</font><font color="#000000">.</font><font color="#000000">printStackTrace</font><font color="#000000">();</font>
<font color="#000000">				System</font><font color="#000000">.</font><font color="#000000">exit</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">);</font>
<font color="#000000">			</font><font color="#000000">}</font><font color="#000000"> </font><b><font color="#7f0055">catch</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">FileNotFoundException</font><font color="#000000"> e2</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				System</font><font color="#000000">.</font><font color="#000000">out</font><font color="#000000">.</font><font color="#000000">println</font><font color="#000000">(</font><font color="#0000ff">"Cannot read file "</font><font color="#000000"> </font><font color="#000000">+</font><font color="#000000"> filename</font><font color="#000000">);</font>
<font color="#000000">				System</font><font color="#000000">.</font><font color="#000000">exit</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">);</font>

<font color="#000000">			</font><font color="#000000">}</font>

<font color="#000000">			</font><font color="#000000">GroupLayout</font><font color="#000000"> layout </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">GroupLayout</font><font color="#000000">(</font><b><font color="#7f0055">this</font></b><font color="#000000">);</font>
<font color="#000000">			</font><b><font color="#7f0055">this</font></b><font color="#000000">.</font><font color="#000000">setLayout</font><font color="#000000">(</font><font color="#000000">layout</font><font color="#000000">);</font>
<font color="#000000">			searchText </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">JTextField</font><font color="#000000">(</font><font color="#000000">DEF_COLUMNS</font><font color="#000000">);</font>
<font color="#000000">			searchText</font><font color="#000000">.</font><font color="#000000">setMaximumSize</font><font color="#000000">(</font>
<font color="#000000">					</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Dimension</font><font color="#000000">(</font><font color="#000000">searchText</font><font color="#000000">.</font><font color="#000000">getMaximumSize</font><font color="#000000">().</font><font color="#000000">width</font><font color="#000000">,</font><font color="#000000"> searchText</font><font color="#000000">.</font><font color="#000000">getPreferredSize</font><font color="#000000">().</font><font color="#000000">height</font><font color="#000000">));</font>
<font color="#000000">			searchText</font><font color="#000000">.</font><font color="#000000">getInputMap</font><font color="#000000">().</font><font color="#000000">put</font><font color="#000000">(</font><font color="#000000">KeyStroke</font><font color="#000000">.</font><font color="#000000">getKeyStroke</font><font color="#000000">(</font><font color="#0000ff">"UP"</font><font color="#000000">),</font><font color="#000000"> </font><font color="#0000ff">"none"</font><font color="#000000">);</font>
<font color="#000000">			searchText</font><font color="#000000">.</font><font color="#000000">getInputMap</font><font color="#000000">().</font><font color="#000000">put</font><font color="#000000">(</font><font color="#000000">KeyStroke</font><font color="#000000">.</font><font color="#000000">getKeyStroke</font><font color="#000000">(</font><font color="#0000ff">"DOWN"</font><font color="#000000">),</font><font color="#000000"> </font><font color="#0000ff">"none"</font><font color="#000000">);</font>
<font color="#000000">			searchText</font><font color="#000000">.</font><font color="#000000">addFocusListener</font><font color="#000000">(</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">FocusListener</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				@Override</font>
<font color="#000000">				</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">focusGained</font><font color="#000000">(</font><font color="#000000">FocusEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">					</font><b><font color="#7f0055">int</font></b><font color="#000000"> pos </font><font color="#000000">=</font><font color="#000000"> searchText</font><font color="#000000">.</font><font color="#000000">getText</font><font color="#000000">().</font><font color="#000000">length</font><font color="#000000">();</font>
<font color="#000000">					searchText</font><font color="#000000">.</font><font color="#000000">setCaretPosition</font><font color="#000000">(</font><font color="#000000">pos</font><font color="#000000">);</font>
<font color="#000000">				</font><font color="#000000">}</font>

<font color="#000000">				</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">focusLost</font><font color="#000000">(</font><font color="#000000">FocusEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				</font><font color="#000000">}</font>
<font color="#000000">			</font><font color="#000000">}</font><font color="#000000">);</font>
<font color="#000000">			</font><font color="#000000">JPanel</font><font color="#000000"> searchTextPanel </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">JPanel</font><font color="#000000">();</font>
<font color="#000000">			searchTextPanel</font><font color="#000000">.</font><font color="#000000">add</font><font color="#000000">(</font><font color="#000000">searchText</font><font color="#000000">);</font>
<font color="#000000">			searchTextPanel</font><font color="#000000">.</font><font color="#000000">setBorder</font><font color="#000000">(</font><font color="#000000">BorderFactory</font><font color="#000000">.</font><font color="#000000">createEmptyBorder</font><font color="#000000">(</font><font color="#000000">2</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">));</font>
<font color="#000000">			searchTextPanel</font><font color="#000000">.</font><font color="#000000">setLayout</font><font color="#000000">(</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">GridLayout</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">));</font>
<font color="#000000">			suggestions </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> JList</font><font color="#000000">&lt;</font><font color="#000000">String</font><font color="#000000">&gt;(</font><font color="#000000">results</font><font color="#000000">);</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">setBorder</font><font color="#000000">(</font><font color="#000000">BorderFactory</font><font color="#000000">.</font><font color="#000000">createLineBorder</font><font color="#000000">(</font><font color="#000000">Color</font><font color="#000000">.</font><font color="#000000">BLACK</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">));</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">setVisible</font><font color="#000000">(</font><b><font color="#7f0055">false</font></b><font color="#000000">);</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">setSelectionMode</font><font color="#000000">(</font><font color="#000000">ListSelectionModel</font><font color="#000000">.</font><font color="#000000">SINGLE_SELECTION</font><font color="#000000">);</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">setMaximumSize</font><font color="#000000">(</font>
<font color="#000000">					</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Dimension</font><font color="#000000">(</font><font color="#000000">searchText</font><font color="#000000">.</font><font color="#000000">getMaximumSize</font><font color="#000000">().</font><font color="#000000">width</font><font color="#000000">,</font><font color="#000000"> suggestions</font><font color="#000000">.</font><font color="#000000">getPreferredSize</font><font color="#000000">().</font><font color="#000000">height</font><font color="#000000">));</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">setPrototypeCellValue</font><font color="#000000">(</font><font color="#000000">suggListLen</font><font color="#000000">);</font><font color="#000000"> </font><font color="#717ab3">// set to make equal</font>
<font color="#000000">															</font><font color="#717ab3">// to the width of</font>
<font color="#000000">															</font><font color="#717ab3">// the</font>
<font color="#000000">															</font><font color="#717ab3">// textfield</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">setFont</font><font color="#000000">(</font><font color="#000000">suggestions</font><font color="#000000">.</font><font color="#000000">getFont</font><font color="#000000">().</font><font color="#000000">deriveFont</font><font color="#000000">(</font><font color="#000000">Font</font><font color="#000000">.</font><font color="#000000">PLAIN</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">13</font><font color="#000000">));</font>
<font color="#000000">			</font><font color="#000000">Action</font><font color="#000000"> makeSelection </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">AbstractAction</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">actionPerformed</font><font color="#000000">(</font><font color="#000000">ActionEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">					</font><b><font color="#7f0055">if</font></b><font color="#000000"> </font><font color="#000000">(!</font><font color="#000000">suggestions</font><font color="#000000">.</font><font color="#000000">isSelectionEmpty</font><font color="#000000">())</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">						</font><font color="#000000">String</font><font color="#000000"> selection </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000">)</font><font color="#000000"> suggestions</font><font color="#000000">.</font><font color="#000000">getSelectedValue</font><font color="#000000">();</font>
<font color="#000000">						selection </font><font color="#000000">=</font><font color="#000000"> selection</font><font color="#000000">.</font><font color="#000000">replaceAll</font><font color="#000000">(</font><font color="#0000ff">"</font><font color="#0000ff">\\</font><font color="#0000ff">&lt;.*?&gt;"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">);</font>
<font color="#000000">						searchText</font><font color="#000000">.</font><font color="#000000">setText</font><font color="#000000">(</font><font color="#000000">selection</font><font color="#000000">);</font>
<font color="#000000">						</font><font color="#000000">getSuggestions</font><font color="#000000">(</font><font color="#000000">selection</font><font color="#000000">);</font>
<font color="#000000">					</font><font color="#000000">}</font>
<font color="#000000">					</font><font color="#000000">searchOnline</font><font color="#000000">(</font><font color="#000000">searchText</font><font color="#000000">.</font><font color="#000000">getText</font><font color="#000000">());</font>
<font color="#000000">				</font><font color="#000000">}</font>
<font color="#000000">			</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">			</font><font color="#000000">Action</font><font color="#000000"> moveSelectionUp </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">AbstractAction</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				@Override</font>
<font color="#000000">				</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">actionPerformed</font><font color="#000000">(</font><font color="#000000">ActionEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">					</font><b><font color="#7f0055">if</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">suggestions</font><font color="#000000">.</font><font color="#000000">getSelectedIndex</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">&gt;=</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">						suggestions</font><font color="#000000">.</font><font color="#000000">requestFocusInWindow</font><font color="#000000">();</font>
<font color="#000000">						suggestions</font><font color="#000000">.</font><font color="#000000">setSelectedIndex</font><font color="#000000">(</font><font color="#000000">suggestions</font><font color="#000000">.</font><font color="#000000">getSelectedIndex</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">-</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">);</font>
<font color="#000000">					</font><font color="#000000">}</font>
<font color="#000000">				</font><font color="#000000">}</font>
<font color="#000000">			</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">			</font><font color="#000000">Action</font><font color="#000000"> moveSelectionDown </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">AbstractAction</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">actionPerformed</font><font color="#000000">(</font><font color="#000000">ActionEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">					</font><b><font color="#7f0055">if</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">suggestions</font><font color="#000000">.</font><font color="#000000">getSelectedIndex</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">!=</font><font color="#000000"> results</font><font color="#000000">.</font><font color="#000000">length</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">						suggestions</font><font color="#000000">.</font><font color="#000000">requestFocusInWindow</font><font color="#000000">();</font>
<font color="#000000">						suggestions</font><font color="#000000">.</font><font color="#000000">setSelectedIndex</font><font color="#000000">(</font><font color="#000000">suggestions</font><font color="#000000">.</font><font color="#000000">getSelectedIndex</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">+</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">);</font>
<font color="#000000">					</font><font color="#000000">}</font>
<font color="#000000">				</font><font color="#000000">}</font>
<font color="#000000">			</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">			</font><font color="#000000">Action</font><font color="#000000"> moveSelectionUpFocused </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">AbstractAction</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">actionPerformed</font><font color="#000000">(</font><font color="#000000">ActionEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">					</font><b><font color="#7f0055">if</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">suggestions</font><font color="#000000">.</font><font color="#000000">getSelectedIndex</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">==</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">						suggestions</font><font color="#000000">.</font><font color="#000000">clearSelection</font><font color="#000000">();</font>
<font color="#000000">						searchText</font><font color="#000000">.</font><font color="#000000">requestFocusInWindow</font><font color="#000000">();</font>
<font color="#000000">						</font><font color="#717ab3">// int pos = searchText.getText().length();</font>
<font color="#000000">						</font><font color="#717ab3">// searchText.select(pos, pos);</font>
<font color="#000000">						searchText</font><font color="#000000">.</font><font color="#000000">setSelectionEnd</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">);</font>

<font color="#000000">					</font><font color="#000000">}</font><font color="#000000"> </font><b><font color="#7f0055">else</font></b><font color="#000000"> </font><b><font color="#7f0055">if</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">suggestions</font><font color="#000000">.</font><font color="#000000">getSelectedIndex</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">&gt;=</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">						suggestions</font><font color="#000000">.</font><font color="#000000">setSelectedIndex</font><font color="#000000">(</font><font color="#000000">suggestions</font><font color="#000000">.</font><font color="#000000">getSelectedIndex</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">-</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">);</font>
<font color="#000000">					</font><font color="#000000">}</font>
<font color="#000000">				</font><font color="#000000">}</font>
<font color="#000000">			</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">getInputMap</font><font color="#000000">(</font><font color="#000000">JComponent</font><font color="#000000">.</font><font color="#000000">WHEN_IN_FOCUSED_WINDOW</font><font color="#000000">).</font><font color="#000000">put</font><font color="#000000">(</font><font color="#000000">KeyStroke</font><font color="#000000">.</font><font color="#000000">getKeyStroke</font><font color="#000000">(</font><font color="#0000ff">"UP"</font><font color="#000000">),</font>
<font color="#000000">					</font><font color="#0000ff">"moveSelectionUp"</font><font color="#000000">);</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">getInputMap</font><font color="#000000">(</font><font color="#000000">JComponent</font><font color="#000000">.</font><font color="#000000">WHEN_IN_FOCUSED_WINDOW</font><font color="#000000">).</font><font color="#000000">put</font><font color="#000000">(</font><font color="#000000">KeyStroke</font><font color="#000000">.</font><font color="#000000">getKeyStroke</font><font color="#000000">(</font><font color="#0000ff">"DOWN"</font><font color="#000000">),</font>
<font color="#000000">					</font><font color="#0000ff">"moveSelectionDown"</font><font color="#000000">);</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">getActionMap</font><font color="#000000">().</font><font color="#000000">put</font><font color="#000000">(</font><font color="#0000ff">"moveSelectionUp"</font><font color="#000000">,</font><font color="#000000"> moveSelectionUp</font><font color="#000000">);</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">getActionMap</font><font color="#000000">().</font><font color="#000000">put</font><font color="#000000">(</font><font color="#0000ff">"moveSelectionDown"</font><font color="#000000">,</font><font color="#000000"> moveSelectionDown</font><font color="#000000">);</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">getInputMap</font><font color="#000000">(</font><font color="#000000">JComponent</font><font color="#000000">.</font><font color="#000000">WHEN_FOCUSED</font><font color="#000000">).</font><font color="#000000">put</font><font color="#000000">(</font><font color="#000000">KeyStroke</font><font color="#000000">.</font><font color="#000000">getKeyStroke</font><font color="#000000">(</font><font color="#0000ff">"ENTER"</font><font color="#000000">),</font><font color="#000000"> </font><font color="#0000ff">"makeSelection"</font><font color="#000000">);</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">getInputMap</font><font color="#000000">().</font><font color="#000000">put</font><font color="#000000">(</font><font color="#000000">KeyStroke</font><font color="#000000">.</font><font color="#000000">getKeyStroke</font><font color="#000000">(</font><font color="#0000ff">"UP"</font><font color="#000000">),</font><font color="#000000"> </font><font color="#0000ff">"moveSelectionUpFocused"</font><font color="#000000">);</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">getActionMap</font><font color="#000000">().</font><font color="#000000">put</font><font color="#000000">(</font><font color="#0000ff">"moveSelectionUpFocused"</font><font color="#000000">,</font><font color="#000000"> moveSelectionUpFocused</font><font color="#000000">);</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">getActionMap</font><font color="#000000">().</font><font color="#000000">put</font><font color="#000000">(</font><font color="#0000ff">"makeSelection"</font><font color="#000000">,</font><font color="#000000"> makeSelection</font><font color="#000000">);</font>
<font color="#000000">			</font><font color="#000000">JPanel</font><font color="#000000"> suggestionsPanel </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">JPanel</font><font color="#000000">();</font>
<font color="#000000">			suggestionsPanel</font><font color="#000000">.</font><font color="#000000">setBorder</font><font color="#000000">(</font><font color="#000000">BorderFactory</font><font color="#000000">.</font><font color="#000000">createEmptyBorder</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">5</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">));</font>
<font color="#000000">			suggestionsPanel</font><font color="#000000">.</font><font color="#000000">add</font><font color="#000000">(</font><font color="#000000">suggestions</font><font color="#000000">);</font>
<font color="#000000">			suggestionsPanel</font><font color="#000000">.</font><font color="#000000">setLayout</font><font color="#000000">(</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">GridLayout</font><font color="#000000">(</font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">));</font>
<font color="#000000">			</font><b><font color="#7f0055">this</font></b><font color="#000000">.</font><font color="#000000">setMaximumSize</font><font color="#000000">(</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Dimension</font><font color="#000000">(</font><font color="#000000">searchText</font><font color="#000000">.</font><font color="#000000">getMaximumSize</font><font color="#000000">().</font><font color="#000000">width</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">this</font></b><font color="#000000">.</font><font color="#000000">getPreferredSize</font><font color="#000000">().</font><font color="#000000">height</font><font color="#000000">));</font>
<font color="#000000">			suggestions</font><font color="#000000">.</font><font color="#000000">addMouseListener</font><font color="#000000">(</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">MouseAdapter</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				@Override</font>
<font color="#000000">				</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">mouseClicked</font><font color="#000000">(</font><font color="#000000">MouseEvent</font><font color="#000000"> mouseEvent</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">					</font><font color="#000000">JList&lt;?&gt;</font><font color="#000000"> theList </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">JList</font><font color="#000000">&lt;?&gt;)</font><font color="#000000"> mouseEvent</font><font color="#000000">.</font><font color="#000000">getSource</font><font color="#000000">();</font>
<font color="#000000">					</font><b><font color="#7f0055">if</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">mouseEvent</font><font color="#000000">.</font><font color="#000000">getClickCount</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">&gt;=</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">						</font><b><font color="#7f0055">int</font></b><font color="#000000"> index </font><font color="#000000">=</font><font color="#000000"> theList</font><font color="#000000">.</font><font color="#000000">locationToIndex</font><font color="#000000">(</font><font color="#000000">mouseEvent</font><font color="#000000">.</font><font color="#000000">getPoint</font><font color="#000000">());</font>
<font color="#000000">						</font><b><font color="#7f0055">if</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">index </font><font color="#000000">&gt;=</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">							</font><font color="#000000">String</font><font color="#000000"> selection </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">getSelectedText</font><font color="#000000">();</font>
<font color="#000000">							searchText</font><font color="#000000">.</font><font color="#000000">setText</font><font color="#000000">(</font><font color="#000000">selection</font><font color="#000000">);</font>
<font color="#000000">							</font><font color="#000000">String</font><font color="#000000"> text </font><font color="#000000">=</font><font color="#000000"> searchText</font><font color="#000000">.</font><font color="#000000">getText</font><font color="#000000">();</font>
<font color="#000000">							</font><font color="#000000">getSuggestions</font><font color="#000000">(</font><font color="#000000">text</font><font color="#000000">);</font>
<font color="#000000">							</font><font color="#000000">searchOnline</font><font color="#000000">(</font><font color="#000000">searchText</font><font color="#000000">.</font><font color="#000000">getText</font><font color="#000000">());</font>
<font color="#000000">						</font><font color="#000000">}</font>
<font color="#000000">					</font><font color="#000000">}</font>
<font color="#000000">				</font><font color="#000000">}</font>
<font color="#000000">			</font><font color="#000000">}</font><font color="#000000">);</font>
<font color="#000000">			searchText</font><font color="#000000">.</font><font color="#000000">addKeyListener</font><font color="#000000">(</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">KeyListener</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				@Override</font>
<font color="#000000">				</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">keyPressed</font><font color="#000000">(</font><font color="#000000">KeyEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				</font><font color="#000000">}</font>

<font color="#000000">				@Override</font>
<font color="#000000">				</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">keyReleased</font><font color="#000000">(</font><font color="#000000">KeyEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">					</font><font color="#000000">JTextField</font><font color="#000000"> txtSrc </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">JTextField</font><font color="#000000">)</font><font color="#000000"> e</font><font color="#000000">.</font><font color="#000000">getSource</font><font color="#000000">();</font>
<font color="#000000">					</font><font color="#000000">String</font><font color="#000000"> text </font><font color="#000000">=</font><font color="#000000"> txtSrc</font><font color="#000000">.</font><font color="#000000">getText</font><font color="#000000">();</font>
<font color="#000000">					</font><font color="#000000">getSuggestions</font><font color="#000000">(</font><font color="#000000">text</font><font color="#000000">);</font>
<font color="#000000">				</font><font color="#000000">}</font>

<font color="#000000">				@Override</font>
<font color="#000000">				</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">keyTyped</font><font color="#000000">(</font><font color="#000000">KeyEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				</font><font color="#000000">}</font>
<font color="#000000">			</font><font color="#000000">}</font><font color="#000000">);</font>
<font color="#000000">			searchText</font><font color="#000000">.</font><font color="#000000">addActionListener</font><font color="#000000">(</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">ActionListener</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">actionPerformed</font><font color="#000000">(</font><font color="#000000">ActionEvent</font><font color="#000000"> e</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">					</font><font color="#000000">String</font><font color="#000000"> selection </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">getSelectedText</font><font color="#000000">();</font>
<font color="#000000">					searchText</font><font color="#000000">.</font><font color="#000000">setText</font><font color="#000000">(</font><font color="#000000">selection</font><font color="#000000">);</font>
<font color="#000000">					</font><font color="#000000">getSuggestions</font><font color="#000000">(</font><font color="#000000">selection</font><font color="#000000">);</font>
<font color="#000000">					</font><font color="#000000">searchOnline</font><font color="#000000">(</font><font color="#000000">searchText</font><font color="#000000">.</font><font color="#000000">getText</font><font color="#000000">());</font>
<font color="#000000">				</font><font color="#000000">}</font>

<font color="#000000">			</font><font color="#000000">}</font><font color="#000000">);</font>
<font color="#000000">			layout</font><font color="#000000">.</font><font color="#000000">setHorizontalGroup</font><font color="#000000">(</font><font color="#000000">layout</font><font color="#000000">.</font><font color="#000000">createSequentialGroup</font><font color="#000000">()</font>
<font color="#000000">					</font><font color="#000000">.</font><font color="#000000">addGroup</font><font color="#000000">(</font><font color="#000000">layout</font><font color="#000000">.</font><font color="#000000">createParallelGroup</font><font color="#000000">(</font><font color="#000000">GroupLayout</font><font color="#000000">.</font><font color="#000000">Alignment</font><font color="#000000">.</font><font color="#000000">LEADING</font><font color="#000000">)</font>
<font color="#000000">							</font><font color="#000000">.</font><font color="#000000">addComponent</font><font color="#000000">(</font><font color="#000000">searchTextPanel</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">DEFAULT_SIZE</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">PREFERRED_SIZE</font><font color="#000000">)</font>
<font color="#000000">							</font><font color="#000000">.</font><font color="#000000">addComponent</font><font color="#000000">(</font><font color="#000000">suggestionsPanel</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">DEFAULT_SIZE</font><font color="#000000">,</font><font color="#000000"> GroupLayout</font><font color="#000000">.</font><font color="#000000">DEFAULT_SIZE</font><font color="#000000">,</font>
<font color="#000000">									GroupLayout</font><font color="#000000">.</font><font color="#000000">PREFERRED_SIZE</font><font color="#000000">))</font>

<font color="#000000">			</font><font color="#000000">);</font>
<font color="#000000">			layout</font><font color="#000000">.</font><font color="#000000">setVerticalGroup</font><font color="#000000">(</font>
<font color="#000000">					layout</font><font color="#000000">.</font><font color="#000000">createSequentialGroup</font><font color="#000000">().</font><font color="#000000">addComponent</font><font color="#000000">(</font><font color="#000000">searchTextPanel</font><font color="#000000">).</font><font color="#000000">addComponent</font><font color="#000000">(</font><font color="#000000">suggestionsPanel</font><font color="#000000">));</font>
<font color="#000000">		</font><font color="#000000">}</font>

<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">paintComponent</font><font color="#000000">(</font><font color="#000000">Graphics</font><font color="#000000"> g</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><b><font color="#7f0055">super</font></b><font color="#000000">.</font><font color="#000000">paintComponent</font><font color="#000000">(</font><font color="#000000">g</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">}</font>

<font color="#000000">		</font><font color="#717ab3">/**</font>
<font color="#717ab3">		 * Makes a call to the implementation of Autocomplete to get suggestions</font>
<font color="#717ab3">		 * for the currently entered text.</font>
<font color="#717ab3">		 * </font>
<font color="#717ab3">		 * </font><b><font color="#7f0055">@param</font></b><font color="#717ab3"> text</font>
<font color="#717ab3">		 *            string to search for</font>
<font color="#717ab3">		 */</font>
<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">getSuggestions</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000"> text</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#717ab3">// text = text.trim();</font>
<font color="#000000">			</font><b><font color="#7f0055">if</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">text</font><font color="#000000">.</font><font color="#000000">equals</font><font color="#000000">(</font><font color="#0000ff">""</font><font color="#000000">))</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				suggestions</font><font color="#000000">.</font><font color="#000000">clearSelection</font><font color="#000000">();</font>
<font color="#000000">				suggestions</font><font color="#000000">.</font><font color="#000000">setVisible</font><font color="#000000">(</font><b><font color="#7f0055">false</font></b><font color="#000000">);</font>
<font color="#000000">			</font><font color="#000000">}</font><font color="#000000"> </font><b><font color="#7f0055">else</font></b><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				</font><b><font color="#7f0055">int</font></b><font color="#000000"> textLen </font><font color="#000000">=</font><font color="#000000"> text</font><font color="#000000">.</font><font color="#000000">length</font><font color="#000000">();</font>
<font color="#000000">				</font><font color="#000000">Queue&lt;String&gt;</font><font color="#000000"> resultQ </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> LinkedList</font><font color="#000000">&lt;</font><font color="#000000">String</font><font color="#000000">&gt;();</font>
<font color="#000000">				</font><b><font color="#7f0055">for</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000"> term </font><font color="#000000">:</font><font color="#000000"> auto</font><font color="#000000">.</font><font color="#000000">topKMatches</font><font color="#000000">(</font><font color="#000000">text</font><font color="#000000">.</font><font color="#000000">toLowerCase</font><font color="#000000">(),</font><font color="#000000"> k</font><font color="#000000">))</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">					resultQ</font><font color="#000000">.</font><font color="#000000">add</font><font color="#000000">(</font><font color="#000000">casingMap</font><font color="#000000">.</font><font color="#000000">get</font><font color="#000000">(</font><font color="#000000">term</font><font color="#000000">));</font>
<font color="#000000">				</font><font color="#000000">}</font>
<font color="#000000">				</font><b><font color="#7f0055">if</font></b><font color="#000000"> </font><font color="#000000">(!</font><font color="#000000">resultQ</font><font color="#000000">.</font><font color="#000000">isEmpty</font><font color="#000000">())</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">					results </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> String</font><font color="#000000">[</font><font color="#000000">resultQ</font><font color="#000000">.</font><font color="#000000">size</font><font color="#000000">()];</font>
<font color="#000000">					</font><b><font color="#7f0055">for</font></b><font color="#000000"> </font><font color="#000000">(</font><b><font color="#7f0055">int</font></b><font color="#000000"> i </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">;</font><font color="#000000"> i </font><font color="#000000">&lt;</font><font color="#000000"> results</font><font color="#000000">.</font><font color="#000000">length</font><font color="#000000">;</font><font color="#000000"> i</font><font color="#000000">++)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">						results</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000"> </font><font color="#000000">=</font><font color="#000000"> resultQ</font><font color="#000000">.</font><font color="#000000">remove</font><font color="#000000">();</font>
<font color="#000000">						results</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000"> </font><font color="#000000">=</font><font color="#000000"> </font><font color="#0000ff">"&lt;html&gt;"</font><font color="#000000"> </font><font color="#000000">+</font><font color="#000000"> results</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">].</font><font color="#000000">substring</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">,</font><font color="#000000"> textLen</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">+</font><font color="#000000"> </font><font color="#0000ff">"&lt;b&gt;"</font><font color="#000000"> </font><font color="#000000">+</font><font color="#000000"> results</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">].</font><font color="#000000">substring</font><font color="#000000">(</font><font color="#000000">textLen</font><font color="#000000">)</font>
<font color="#000000">								</font><font color="#000000">+</font><font color="#000000"> </font><font color="#0000ff">"&lt;/b&gt;&lt;/html&gt;"</font><font color="#000000">;</font>
<font color="#000000">					</font><font color="#000000">}</font>
<font color="#000000">					suggestions</font><font color="#000000">.</font><font color="#000000">setListData</font><font color="#000000">(</font><font color="#000000">results</font><font color="#000000">);</font>
<font color="#000000">					suggestions</font><font color="#000000">.</font><font color="#000000">setVisible</font><font color="#000000">(</font><b><font color="#7f0055">true</font></b><font color="#000000">);</font>
<font color="#000000">					</font><font color="#717ab3">// suggestions.setSelectedIndex(0); // Pressing enter</font>
<font color="#000000">					</font><font color="#717ab3">// automatically selects the first one</font>
<font color="#000000">					</font><font color="#717ab3">// if nothing has been</font>
<font color="#000000">				</font><font color="#000000">}</font><font color="#000000"> </font><b><font color="#7f0055">else</font></b><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">					</font><font color="#717ab3">// No suggestions</font>
<font color="#000000">					suggestions</font><font color="#000000">.</font><font color="#000000">setVisible</font><font color="#000000">(</font><b><font color="#7f0055">false</font></b><font color="#000000">);</font>
<font color="#000000">					suggestions</font><font color="#000000">.</font><font color="#000000">clearSelection</font><font color="#000000">();</font>
<font color="#000000">				</font><font color="#000000">}</font>
<font color="#000000">			</font><font color="#000000">}</font>
<font color="#000000">		</font><font color="#000000">}</font>

<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><font color="#000000">String</font><font color="#000000"> </font><font color="#000000">getSelectedText</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><b><font color="#7f0055">if</font></b><font color="#000000"> </font><font color="#000000">(!</font><font color="#000000">suggestions</font><font color="#000000">.</font><font color="#000000">isSelectionEmpty</font><font color="#000000">())</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				</font><font color="#000000">String</font><font color="#000000"> selection </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000">)</font><font color="#000000"> suggestions</font><font color="#000000">.</font><font color="#000000">getSelectedValue</font><font color="#000000">();</font>
<font color="#000000">				selection </font><font color="#000000">=</font><font color="#000000"> selection</font><font color="#000000">.</font><font color="#000000">replaceAll</font><font color="#000000">(</font><font color="#0000ff">"</font><font color="#0000ff">\\</font><font color="#0000ff">&lt;.*?&gt;"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">);</font>
<font color="#000000">				</font><b><font color="#7f0055">return</font></b><font color="#000000"> selection</font><font color="#000000">;</font>
<font color="#000000">			</font><font color="#000000">}</font><font color="#000000"> </font><b><font color="#7f0055">else</font></b>
<font color="#000000">				</font><b><font color="#7f0055">return</font></b><font color="#000000"> </font><font color="#000000">getSearchText</font><font color="#000000">();</font>
<font color="#000000">		</font><font color="#000000">}</font>

<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><font color="#000000">String</font><font color="#000000"> </font><font color="#000000">getSearchText</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><b><font color="#7f0055">return</font></b><font color="#000000"> searchText</font><font color="#000000">.</font><font color="#000000">getText</font><font color="#000000">();</font>
<font color="#000000">		</font><font color="#000000">}</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#717ab3">/**</font>
<font color="#717ab3">	 * Creates a URI from the user-defined string and searches the web with the</font>
<font color="#717ab3">	 * selected search engine Opens the default web browser (or a new tab if it</font>
<font color="#717ab3">	 * is already open)</font>
<font color="#717ab3">	 * </font>
<font color="#717ab3">	 * </font><b><font color="#7f0055">@param</font></b><font color="#717ab3"> s</font>
<font color="#717ab3">	 *            string to search online for</font>
<font color="#717ab3">	 */</font>
<font color="#000000">	</font><b><font color="#7f0055">private</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">searchOnline</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000"> s</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><font color="#000000">URI</font><font color="#000000"> searchAddress </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">null</font></b><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">try</font></b><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#000000">URI</font><font color="#000000"> tempAddress </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">URI</font><font color="#000000">(</font><font color="#000000">searchURL </font><font color="#000000">+</font><font color="#000000"> s</font><font color="#000000">.</font><font color="#000000">trim</font><font color="#000000">().</font><font color="#000000">replace</font><font color="#000000">(</font><font color="#0000ff">' '</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">'+'</font><font color="#000000">));</font>
<font color="#000000">			searchAddress </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">URI</font><font color="#000000">(</font><font color="#000000">tempAddress</font><font color="#000000">.</font><font color="#000000">toASCIIString</font><font color="#000000">());</font><font color="#000000"> </font><font color="#717ab3">// hack to</font>
<font color="#000000">																	</font><font color="#717ab3">// handle</font>
<font color="#000000">																	</font><font color="#717ab3">// Unicode</font>
<font color="#000000">		</font><font color="#000000">}</font><font color="#000000"> </font><b><font color="#7f0055">catch</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">URISyntaxException</font><font color="#000000"> e2</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			e2</font><font color="#000000">.</font><font color="#000000">printStackTrace</font><font color="#000000">();</font>
<font color="#000000">			</font><b><font color="#7f0055">return</font></b><font color="#000000">;</font>
<font color="#000000">		</font><font color="#000000">}</font>
<font color="#000000">		</font><b><font color="#7f0055">try</font></b><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			Desktop</font><font color="#000000">.</font><font color="#000000">getDesktop</font><font color="#000000">().</font><font color="#000000">browse</font><font color="#000000">(</font><font color="#000000">searchAddress</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">}</font><font color="#000000"> </font><b><font color="#7f0055">catch</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">IOException</font><font color="#000000"> e1</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			e1</font><font color="#000000">.</font><font color="#000000">printStackTrace</font><font color="#000000">();</font>
<font color="#000000">		</font><font color="#000000">}</font>
<font color="#000000">	</font><font color="#000000">}</font>
<font color="#000000">}</font>
</tt></pre>
</body>
</html>

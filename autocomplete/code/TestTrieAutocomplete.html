<html>
<head>
<title>TestTrieAutocomplete.java</title>
</head>
<body>
Link to code: <a href="../src/TestTrieAutocomplete.java">TestTrieAutocomplete.java</a><br>
<hr>
<!-- Generator: GNU source-highlight 3.1.1
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><font color="#3f5fbf">import</font><font color="#000000"> </font><b><font color="#7f0055">static</font></b><font color="#000000"> org</font><font color="#000000">.</font><font color="#000000">junit</font><font color="#000000">.</font><font color="#000000">Assert</font><font color="#000000">.*;</font>

<font color="#3f5fbf">import</font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">util</font><font color="#000000">.</font><font color="#000000">ArrayList</font><font color="#000000">;</font>
<font color="#3f5fbf">import</font><font color="#000000"> java</font><font color="#000000">.</font><font color="#000000">util</font><font color="#000000">.</font><font color="#000000">HashSet</font><font color="#000000">;</font>

<font color="#3f5fbf">import</font><font color="#000000"> org</font><font color="#000000">.</font><font color="#000000">junit</font><font color="#000000">.</font><font color="#000000">Test</font><font color="#000000">;</font>

<b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">class</font></b><font color="#000000"> </font><font color="#000000">TestTrieAutocomplete</font><font color="#000000"> </font><font color="#000000">{</font>

<font color="#000000">	Term</font><font color="#000000">[]</font><font color="#000000"> terms </font><font color="#000000">=</font>
<font color="#000000">			</font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">[]</font><font color="#000000"> </font><font color="#000000">{</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">6</font><font color="#000000">),</font><font color="#000000"> </font>
<font color="#000000">			</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"app"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">4</font><font color="#000000">),</font><font color="#000000"> </font>
<font color="#000000">			</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ban"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">2</font><font color="#000000">),</font>
<font color="#000000">			</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">3</font><font color="#000000">),</font>
<font color="#000000">			</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">5</font><font color="#000000">),</font>
<font color="#000000">			</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">7</font><font color="#000000">),</font>
<font color="#000000">			</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"cat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">)</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">	String</font><font color="#000000">[]</font><font color="#000000"> names</font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"app"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ban"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"cat"</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">	</font><b><font color="#7f0055">double</font></b><font color="#000000">[]</font><font color="#000000"> weights </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000">6</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">4</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">2</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">3</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">5</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">7</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">}</font><font color="#000000">;</font>

<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><font color="#000000">Autocompletor</font><font color="#000000"> </font><font color="#000000">getInstance</font><font color="#000000">()</font><font color="#000000">{</font>
<font color="#000000">		</font><b><font color="#7f0055">return</font></b><font color="#000000"> </font><font color="#000000">getInstance</font><font color="#000000">(</font><font color="#000000">names</font><font color="#000000">,</font><font color="#000000"> weights</font><font color="#000000">);</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><font color="#000000">Autocompletor</font><font color="#000000"> </font><font color="#000000">getInstance</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000">[]</font><font color="#000000"> names</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">double</font></b><font color="#000000">[]</font><font color="#000000"> weights</font><font color="#000000">)</font><font color="#000000">{</font>
<font color="#000000">		</font><b><font color="#7f0055">return</font></b><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">TrieAutocomplete</font><font color="#000000">(</font><font color="#000000">names</font><font color="#000000">,</font><font color="#000000"> weights</font><font color="#000000">);</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">class</font></b><font color="#000000"> </font><font color="#000000">Autoincompletor</font><font color="#000000"> </font><b><font color="#7f0055">extends</font></b><font color="#000000"> TrieAutocomplete</font><font color="#000000">{</font>

<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><font color="#000000">Autoincompletor</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000">[]</font><font color="#000000"> terms</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">double</font></b><font color="#000000">[]</font><font color="#000000"> weights</font><font color="#000000">)</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">			</font><b><font color="#7f0055">super</font></b><font color="#000000">(</font><font color="#000000">terms</font><font color="#000000">,</font><font color="#000000"> weights</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">}</font>

<font color="#000000">		@Override</font>
<font color="#000000">		</font><b><font color="#7f0055">public</font></b><font color="#000000"> String</font><font color="#000000">[]</font><font color="#000000"> </font><font color="#000000">topKMatches</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000"> prefix</font><font color="#000000">,</font><font color="#000000"> </font><b><font color="#7f0055">int</font></b><font color="#000000"> k</font><font color="#000000">)</font><font color="#000000">{</font>
<font color="#000000">			</font><b><font color="#7f0055">return</font></b><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> String</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">];</font>
<font color="#000000">		</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><font color="#000000">ArrayList&lt;ArrayList&lt;Term&gt;&gt; allPermutes(ArrayList&lt;Term&gt;</font><font color="#000000"> arr</font><font color="#000000">)</font><font color="#000000">{</font>
<font color="#000000">		</font><b><font color="#7f0055">if</font></b><font color="#000000"> </font><font color="#000000">(</font><font color="#000000">arr</font><font color="#000000">.</font><font color="#000000">size</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">==</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">)</font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#000000">ArrayList&lt;ArrayList&lt;Term&gt;&gt;</font><font color="#000000"> output </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b>
<font color="#000000">					ArrayList</font><font color="#000000">&lt;</font><font color="#000000">ArrayList</font><font color="#000000">&lt;</font><font color="#000000">Term</font><font color="#000000">&gt;&gt;();</font>
<font color="#000000">			output</font><font color="#000000">.</font><font color="#000000">add</font><font color="#000000">(</font><font color="#000000">arr</font><font color="#000000">);</font>
<font color="#000000">			</font><b><font color="#7f0055">return</font></b><font color="#000000"> output</font><font color="#000000">;</font>
<font color="#000000">		</font><font color="#000000">}</font>
<font color="#000000">		</font><font color="#000000">ArrayList&lt;ArrayList&lt;Term&gt;&gt;</font><font color="#000000"> output </font><font color="#000000">=</font><font color="#000000"> </font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> ArrayList</font><font color="#000000">&lt;</font><font color="#000000">ArrayList</font><font color="#000000">&lt;</font><font color="#000000">Term</font><font color="#000000">&gt;&gt;();</font>
<font color="#000000">		</font><b><font color="#7f0055">for</font></b><font color="#000000">(</font><b><font color="#7f0055">int</font></b><font color="#000000"> i </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">;</font><font color="#000000"> i </font><font color="#000000">&lt;</font><font color="#000000"> arr</font><font color="#000000">.</font><font color="#000000">size</font><font color="#000000">();</font><font color="#000000"> i</font><font color="#000000">++)</font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#000000">ArrayList&lt;Term&gt;</font><font color="#000000"> arrcopy </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> ArrayList</font><font color="#000000">&lt;</font><font color="#000000">Term</font><font color="#000000">&gt;(</font><font color="#000000">arr</font><font color="#000000">);</font>
<font color="#000000">			arrcopy</font><font color="#000000">.</font><font color="#000000">remove</font><font color="#000000">(</font><font color="#000000">i</font><font color="#000000">);</font>
<font color="#000000">			</font><font color="#000000">ArrayList&lt;ArrayList&lt;Term&gt;&gt;</font><font color="#000000"> subPermutes </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">allPermutes</font><font color="#000000">(</font><font color="#000000">arrcopy</font><font color="#000000">);</font>
<font color="#000000">			</font><b><font color="#7f0055">for</font></b><font color="#000000">(</font><font color="#000000">ArrayList&lt;Term&gt;</font><font color="#000000"> permute</font><font color="#000000">:</font><font color="#000000"> subPermutes</font><font color="#000000">)</font>
<font color="#000000">				permute</font><font color="#000000">.</font><font color="#000000">add</font><font color="#000000">(</font><font color="#000000">arr</font><font color="#000000">.</font><font color="#000000">get</font><font color="#000000">(</font><font color="#000000">i</font><font color="#000000">));</font>
<font color="#000000">			output</font><font color="#000000">.</font><font color="#000000">addAll</font><font color="#000000">(</font><font color="#000000">subPermutes</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">}</font>
<font color="#000000">		</font><b><font color="#7f0055">return</font></b><font color="#000000"> output</font><font color="#000000">;</font>
<font color="#000000">	</font><font color="#000000">}</font>
<font color="#000000">	</font>

<font color="#000000">	</font><font color="#717ab3">/**Tests correctness of topMatch() for a few simple cases</font>
<font color="#717ab3">	 */</font>
<font color="#000000">	@</font><font color="#000000">Test</font><font color="#000000">(</font><font color="#000000">timeout </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">10000</font><font color="#000000">)</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">testTopMatch</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><font color="#000000">Autocompletor</font><font color="#000000"> test </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">getInstance</font><font color="#000000">();</font>
<font color="#000000">		String</font><font color="#000000">[]</font><font color="#000000"> queries </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"a"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ap"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"b"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ba"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"c"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ca"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"cat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"d"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">" "</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		String</font><font color="#000000">[]</font><font color="#000000"> results </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"cat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">for</font></b><font color="#000000">(</font><b><font color="#7f0055">int</font></b><font color="#000000"> i </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">;</font><font color="#000000"> i </font><font color="#000000">&lt;</font><font color="#000000"> queries</font><font color="#000000">.</font><font color="#000000">length</font><font color="#000000">;</font><font color="#000000"> i</font><font color="#000000">++)</font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#000000">String</font><font color="#000000"> query </font><font color="#000000">=</font><font color="#000000"> queries</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">];</font>
<font color="#000000">			</font><font color="#000000">String</font><font color="#000000"> reported </font><font color="#000000">=</font><font color="#000000"> test</font><font color="#000000">.</font><font color="#000000">topMatch</font><font color="#000000">(</font><font color="#000000">query</font><font color="#000000">);</font>
<font color="#000000">			</font><font color="#000000">String</font><font color="#000000"> actual </font><font color="#000000">=</font><font color="#000000"> results</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">];</font>
<font color="#000000">			</font><font color="#000000">assertEquals</font><font color="#000000">(</font><font color="#0000ff">"wrong top match for "</font><font color="#000000">+</font><font color="#000000">query</font><font color="#000000">,</font><font color="#000000"> actual</font><font color="#000000">,</font><font color="#000000"> reported</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">}</font>
<font color="#000000">	</font><font color="#000000">}</font>


<font color="#000000">	</font><font color="#717ab3">/**Tests correctness of topKMatches() for a few simple cases</font>
<font color="#717ab3">	 */</font>
<font color="#000000">	@</font><font color="#000000">Test</font><font color="#000000">(</font><font color="#000000">timeout </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">10000</font><font color="#000000">)</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">testTopKMatches</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><font color="#000000">Autocompletor</font><font color="#000000"> test </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">getInstance</font><font color="#000000">();</font>
<font color="#000000">		String</font><font color="#000000">[]</font><font color="#000000"> queries </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"a"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ap"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"b"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ba"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"d"</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">int</font></b><font color="#000000">[]</font><font color="#000000"> ks </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#000000">8</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">2</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">3</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">2</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">2</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">100</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		String</font><font color="#000000">[][]</font><font color="#000000"> results </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">				</font><font color="#000000">{</font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"app"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ban"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"cat"</font><font color="#000000">}</font><font color="#000000">,</font>
<font color="#000000">				</font><font color="#000000">{</font><font color="#0000ff">"car"</font><font color="#000000">}</font><font color="#000000">,</font><font color="#000000"> </font>
<font color="#000000">				</font><font color="#000000">{</font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000">}</font><font color="#000000">,</font><font color="#000000"> </font>
<font color="#000000">				</font><font color="#000000">{</font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bee"</font><font color="#000000">}</font><font color="#000000">,</font><font color="#000000"> </font>
<font color="#000000">				</font><font color="#000000">{</font><font color="#0000ff">"ape"</font><font color="#000000">}</font><font color="#000000">,</font><font color="#000000"> </font>
<font color="#000000">				</font><font color="#000000">{</font><font color="#0000ff">"ape"</font><font color="#000000">}</font><font color="#000000">,</font>
<font color="#000000">				</font><font color="#000000">{</font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bat"</font><font color="#000000">}</font><font color="#000000">,</font>
<font color="#000000">				</font><font color="#000000">{</font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ban"</font><font color="#000000">}</font><font color="#000000">,</font>
<font color="#000000">				</font><font color="#000000">{}</font>
<font color="#000000">		</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">for</font></b><font color="#000000">(</font><b><font color="#7f0055">int</font></b><font color="#000000"> i </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">;</font><font color="#000000"> i </font><font color="#000000">&lt;</font><font color="#000000"> queries</font><font color="#000000">.</font><font color="#000000">length</font><font color="#000000">;</font><font color="#000000"> i</font><font color="#000000">++)</font><font color="#000000">{</font>
<font color="#000000">			</font><font color="#000000">String</font><font color="#000000"> query </font><font color="#000000">=</font><font color="#000000"> queries</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">];</font>
<font color="#000000">			String</font><font color="#000000">[]</font><font color="#000000"> reported </font><font color="#000000">=</font><font color="#000000"> test</font><font color="#000000">.</font><font color="#000000">topKMatches</font><font color="#000000">(</font><font color="#000000">query</font><font color="#000000">,</font><font color="#000000"> ks</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]);</font>
<font color="#000000">			String</font><font color="#000000">[]</font><font color="#000000"> actual </font><font color="#000000">=</font><font color="#000000"> results</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">];</font>
<font color="#000000">			</font><font color="#000000">assertArrayEquals</font><font color="#000000">(</font><font color="#0000ff">"wrong top matches for "</font><font color="#000000">+</font><font color="#000000">query</font><font color="#000000">+</font><font color="#0000ff">" "</font><font color="#000000">+</font><font color="#000000">ks</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">],</font>
<font color="#000000">					actual</font><font color="#000000">,</font><font color="#000000"> reported</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">}</font>
<font color="#000000">	</font><font color="#000000">}</font>

<font color="#000000">	</font><font color="#717ab3">/**</font>
<font color="#717ab3">	 * A more rigorous testing of Trie, to make sure add works.</font>
<font color="#717ab3">	 * The Trie should be constructed the same regardless of the order</font>
<font color="#717ab3">	 * words are added to the Trie, which means topMatch should return</font>
<font color="#717ab3">	 * the same output regardless of what order they are added in.</font>
<font color="#717ab3">	 * </font>
<font color="#717ab3">	 * So, we compute all orders to add the elements, add words to the trie</font>
<font color="#717ab3">	 * in those orders, and then call topMatch on a fixed series of inputs.</font>
<font color="#717ab3">	 * We keep a set of the list of outputs - if the set size goes past 1,</font>
<font color="#717ab3">	 * then two different add orders produced two different tries</font>
<font color="#717ab3">	 * and thus two different outputs, so add is not working.</font>
<font color="#717ab3">	 */</font>
<font color="#000000">	@</font><font color="#000000">Test</font><font color="#000000">(</font><font color="#000000">timeout </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">10000</font><font color="#000000">)</font>
<font color="#000000">	</font><b><font color="#7f0055">public</font></b><font color="#000000"> </font><b><font color="#7f0055">void</font></b><font color="#000000"> </font><font color="#000000">testAdd</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">{</font>
<font color="#000000">		</font><font color="#000000">ArrayList&lt;Term&gt;</font><font color="#000000"> termList </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> ArrayList</font><font color="#000000">&lt;</font><font color="#000000">Term</font><font color="#000000">&gt;();</font>
<font color="#000000">		Term</font><font color="#000000">[]</font><font color="#000000"> terms </font><font color="#000000">=</font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> Term</font><font color="#000000">[]</font><font color="#000000"> </font><font color="#000000">{</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">6</font><font color="#000000">),</font><font color="#000000"> </font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"app"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">4</font><font color="#000000">),</font><font color="#000000"> </font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"ban"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">2</font><font color="#000000">),</font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">3</font><font color="#000000">),</font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">5</font><font color="#000000">),</font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">7</font><font color="#000000">),</font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">Term</font><font color="#000000">(</font><font color="#0000ff">"cat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">)</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		String</font><font color="#000000">[]</font><font color="#000000"> queries </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">{</font><font color="#0000ff">""</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"a"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ap"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ape"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"app"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"b"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ba"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ban"</font><font color="#000000">,</font><font color="#000000"> </font>
<font color="#000000">				</font><font color="#0000ff">"bat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"be"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"bee"</font><font color="#000000">,</font><font color="#000000">	</font><font color="#0000ff">"c"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"ca"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"car"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"cat"</font><font color="#000000">,</font><font color="#000000"> </font><font color="#0000ff">"f"</font><font color="#000000">}</font><font color="#000000">;</font>
<font color="#000000">		</font><b><font color="#7f0055">for</font></b><font color="#000000">(</font><font color="#000000">Term</font><font color="#000000"> t</font><font color="#000000">:</font><font color="#000000"> terms</font><font color="#000000">)</font>
<font color="#000000">			termList</font><font color="#000000">.</font><font color="#000000">add</font><font color="#000000">(</font><font color="#000000">t</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">ArrayList&lt;ArrayList&lt;Term&gt;&gt;</font><font color="#000000"> orders </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">allPermutes</font><font color="#000000">(</font><font color="#000000">termList</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">HashSet&lt;ArrayList&lt;String&gt;&gt;</font><font color="#000000"> outputs </font><font color="#000000">=</font><font color="#000000"> </font>
<font color="#000000">				</font><b><font color="#7f0055">new</font></b><font color="#000000"> HashSet</font><font color="#000000">&lt;</font><font color="#000000">ArrayList</font><font color="#000000">&lt;</font><font color="#000000">String</font><font color="#000000">&gt;&gt;();</font>
<font color="#000000">		</font><b><font color="#7f0055">for</font></b><font color="#000000">(</font><font color="#000000">ArrayList&lt;Term&gt;</font><font color="#000000"> order</font><font color="#000000">:</font><font color="#000000"> orders</font><font color="#000000">)</font><font color="#000000">{</font>
<font color="#000000">			String</font><font color="#000000">[]</font><font color="#000000"> names </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> String</font><font color="#000000">[</font><font color="#000000">order</font><font color="#000000">.</font><font color="#000000">size</font><font color="#000000">()];</font>
<font color="#000000">			</font><b><font color="#7f0055">double</font></b><font color="#000000">[]</font><font color="#000000"> weights </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><b><font color="#7f0055">double</font></b><font color="#000000">[</font><font color="#000000">order</font><font color="#000000">.</font><font color="#000000">size</font><font color="#000000">()];</font>
<font color="#000000">			</font><b><font color="#7f0055">for</font></b><font color="#000000">(</font><b><font color="#7f0055">int</font></b><font color="#000000"> i </font><font color="#000000">=</font><font color="#000000"> </font><font color="#000000">0</font><font color="#000000">;</font><font color="#000000"> i </font><font color="#000000">&lt;</font><font color="#000000"> order</font><font color="#000000">.</font><font color="#000000">size</font><font color="#000000">();</font><font color="#000000"> i</font><font color="#000000">++)</font><font color="#000000">{</font>
<font color="#000000">				names</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000"> </font><font color="#000000">=</font><font color="#000000"> order</font><font color="#000000">.</font><font color="#000000">get</font><font color="#000000">(</font><font color="#000000">i</font><font color="#000000">).</font><font color="#000000">getWord</font><font color="#000000">();</font>
<font color="#000000">				weights</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000"> </font><font color="#000000">=</font><font color="#000000"> order</font><font color="#000000">.</font><font color="#000000">get</font><font color="#000000">(</font><font color="#000000">i</font><font color="#000000">).</font><font color="#000000">getWeight</font><font color="#000000">();</font>
<font color="#000000">			</font><font color="#000000">}</font>
<font color="#000000">			</font><font color="#000000">TrieAutocomplete</font><font color="#000000"> auto </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> </font><font color="#000000">TrieAutocomplete</font><font color="#000000">(</font><font color="#000000">names</font><font color="#000000">,</font><font color="#000000"> weights</font><font color="#000000">);</font>
<font color="#000000">			</font><font color="#000000">ArrayList&lt;String&gt;</font><font color="#000000"> output </font><font color="#000000">=</font><font color="#000000"> </font><b><font color="#7f0055">new</font></b><font color="#000000"> ArrayList</font><font color="#000000">&lt;</font><font color="#000000">String</font><font color="#000000">&gt;();</font>
<font color="#000000">			</font><b><font color="#7f0055">for</font></b><font color="#000000">(</font><font color="#000000">String</font><font color="#000000"> query</font><font color="#000000">:</font><font color="#000000"> queries</font><font color="#000000">)</font><font color="#000000">{</font>
<font color="#000000">				output</font><font color="#000000">.</font><font color="#000000">add</font><font color="#000000">(</font><font color="#000000">auto</font><font color="#000000">.</font><font color="#000000">topMatch</font><font color="#000000">(</font><font color="#000000">query</font><font color="#000000">));</font>
<font color="#000000">			</font><font color="#000000">}</font>
<font color="#000000">			outputs</font><font color="#000000">.</font><font color="#000000">add</font><font color="#000000">(</font><font color="#000000">output</font><font color="#000000">);</font>
<font color="#000000">			</font><font color="#000000">assertTrue</font><font color="#000000">(</font><font color="#0000ff">"results depend on add order"</font><font color="#000000">,</font>
<font color="#000000">					outputs</font><font color="#000000">.</font><font color="#000000">size</font><font color="#000000">()</font><font color="#000000"> </font><font color="#000000">&lt;=</font><font color="#000000"> </font><font color="#000000">1</font><font color="#000000">);</font>
<font color="#000000">		</font><font color="#000000">}</font>
<font color="#000000">	</font><font color="#000000">}</font>
<font color="#000000">}</font>
</tt></pre>
</body>
</html>
